import{E as W}from"./echo-97da9b6e.js";import{c as f}from"./_commonjsHelpers-725317a4.js";var T={},N={},d={};Object.defineProperty(d,"__esModule",{value:!0});d.Connector=void 0;var q=function(){function s(n){this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",broadcaster:"pusher",csrfToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(n),this.connect()}return s.prototype.setOptions=function(n){return this.options=Object.assign(this._defaultOptions,n),this.csrfToken()&&(this.options.auth.headers["X-CSRF-TOKEN"]=this.csrfToken()),n},s.prototype.csrfToken=function(){var n;return typeof window<"u"&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"&&(n=document.querySelector('meta[name="csrf-token"]'),n)?n.getAttribute("content"):null},s}();d.Connector=q;var k={},O={},y={};Object.defineProperty(y,"__esModule",{value:!0});y.Channel=void 0;var z=function(){function s(){}return s.prototype.listenForWhisper=function(n,r){return this.listen(".client-"+n,r)},s.prototype.notification=function(n){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",n)},s.prototype.stopListeningForWhisper=function(n){return this.stopListening(".client-"+n)},s}();y.Channel=z;var p={},w={},g={};Object.defineProperty(g,"__esModule",{value:!0});g.EventFormatter=void 0;var G=function(){function s(n){this.namespace=n}return s.prototype.format=function(n){return n.charAt(0)==="."||n.charAt(0)==="\\"?n.substr(1):(this.namespace&&(n=this.namespace+"."+n),n.replace(/\./g,"\\"))},s.prototype.setNamespace=function(n){this.namespace=n},s}();g.EventFormatter=G;var l={},P={},h={};Object.defineProperty(h,"__esModule",{value:!0});h.Message=void 0;var K=function(){function s(){}return s}();h.Message=K;(function(s){var n=f&&f.__extends||function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var u in c)c.hasOwnProperty(u)&&(i[u]=c[u])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(s,"__esModule",{value:!0}),s.OutgoingMessage=s.OutgoingMessageType=void 0;var r=h;(function(o){o.LINK_CONNECTION="link",o.SUBSCRIBE="subscribe",o.UNSUBSCRIBE="unsubscribe",o.WHISPER="whisper",o.BROADCAST="broadcast"})(s.OutgoingMessageType||(s.OutgoingMessageType={}));var a=function(o){n(t,o);function t(e,i){var c=o.call(this)||this;return c.token=e,c.action=i,c}return t.prototype.toNetworkJson=function(){var e;return{event:this.event,token:this.token,connection_id:this.connectionId,action:this.action,payload:this.payload,channel:(e=this.channel)===null||e===void 0?void 0:e.name}},t}(r.Message);s.OutgoingMessage=a})(P);var b={},A={};(function(s){var n=f&&f.__extends||function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var u in c)c.hasOwnProperty(u)&&(i[u]=c[u])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(s,"__esModule",{value:!0}),s.IncomingMessage=s.IncomingMessageType=void 0;var r=h;(function(o){o.LINKED="linked"})(s.IncomingMessageType||(s.IncomingMessageType={}));var a=function(o){n(t,o);function t(e){var i=o.call(this)||this;return i.action=e.action,i.event=e.event,i.payload=e.payload,i.connectionId=e.connection_id,i}return t}(r.Message);s.IncomingMessage=a})(A);var m={},J=f&&f.__extends||function(){var s=function(n,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var t in o)o.hasOwnProperty(t)&&(a[t]=o[t])},s(n,r)};return function(n,r){s(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(m,"__esModule",{value:!0});m.LinkMessage=void 0;var D=h,V=function(s){J(n,s);function n(r,a){var o=s.call(this)||this;return o.token=r,o.uuid=a,o}return n.prototype.toNetworkJson=function(){return{action:"link",token:this.token,uuid:this.uuid}},n}(D.Message);m.LinkMessage=V;Object.defineProperty(b,"__esModule",{value:!0});b.LarasocketWebsocket=void 0;var M=A,$=m,H=function(){function s(n,r,a){this.timeout=500,this.options=n,this.csrf=n.auth.headers["X-CSRF-TOKEN"],this.uuid=this.uuidv4(),this.onMessageListener=r,this.reconnectListener=a,this.websocketUrl=n.wsHost||"ws.larasocket.com",this.token=encodeURIComponent(this.options.token)}return s.prototype.close=function(){this.websocketInstance&&this.websocketInstance.close()},s.prototype.send=function(n){var r=this;this.getWebsocketInstance().then(function(a){n.connectionId=r.connectionId,a.send(JSON.stringify(n.toNetworkJson()))})},s.prototype.getAuthNetworkPromise=function(n){var r=this;return this.getWebsocketInstance().then(function(a){if(r.options.authorizer){var o=r.options.authorizer(n,r.options);return new Promise(function(e,i){o.authorize(r.connectionId,function(c,u){return c?i(u):e(u)})})}var t;return typeof Vue=="function"&&Vue.http&&(t=Vue.http),typeof axios=="function"&&(t=axios),typeof jQuery=="function"&&(t=jQuery),t?t.post(r.options.authEndpoint,{socket_id:r.connectionId,channel_name:n.name,_token:r.csrf}).then(function(e){return e.data}):fetch(r.options.authEndpoint,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({socket_id:r.connectionId,channel_name:n.name,_token:r.csrf})}).then(function(e){return e.json()})})},s.prototype.getWebsocketInstance=function(){return this.websocketInstance?Promise.resolve(this.websocketInstance):this.connect()},s.prototype.websocketInstanceReady=function(n){this.websocketInstance=n,this.websocketInitializationPromise=void 0},s.prototype.reconnect=function(){var n=this;return this.websocketInitializationPromise=void 0,this.websocketInstance=void 0,this.connect().then(function(r){return n.reconnectListener(n),r})},s.prototype.connect=function(){var n=this;return this.websocketInitializationPromise?this.websocketInitializationPromise:(this.websocketInitializationPromise=new Promise(function(r,a){var o=new WebSocket("wss://"+n.websocketUrl+"?token="+n.token+"&uuid="+n.uuid);o.onopen=function(t){return n.onOpen(o,t)},o.onclose=function(t){return n.onClose(t)},o.onerror=function(t){return n.onError(t)},o.onmessage=function(t){n.onMessage(o,r,a,t)}}),this.websocketInitializationPromise)},s.prototype.onOpen=function(n,r){this.options.debug&&console.log("[LARASOCKET DEBUG]: onopen -> ",r),n.send(JSON.stringify(new $.LinkMessage(this.token,this.uuid).toNetworkJson()))},s.prototype.onClose=function(n){var r=this,a=this.getTimeout();this.options.debug&&(console.log("[LARASOCKET DEBUG]: onclose -> ",n),console.log("Reconnecting in "+a/1e3+"s")),this.currentTimeout&&clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout(function(){return r.reconnect()},a)},s.prototype.onError=function(n){this.options.debug&&(console.log("[LARASOCKET DEBUG]: onerror -> ",n),console.log("Error encountered. Closing socket.")),this.close()},s.prototype.onMessage=function(n,r,a,o){this.options.debug&&console.log("[LARASOCKET DEBUG]: onmessage -> ",o);var t=o.data;try{var e=JSON.parse(t),i=new M.IncomingMessage(e);i.action===M.IncomingMessageType.LINKED?(this.connectionId=i.connectionId,this.websocketInstanceReady(n),r(n)):this.onMessageListener(i)}catch(c){a(c)}},s.prototype.getTimeout=function(){var n=Math.min(this.timeout,1e4);return this.timeout*=2,n},s.prototype.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=Math.random()*16|0,a=n==="x"?r:r&3|8;return a.toString(16)})},s}();b.LarasocketWebsocket=H;var L;function X(){if(L)return l;L=1,Object.defineProperty(l,"__esModule",{value:!0}),l.LarasocketManager=void 0;var s=F(),n=g,r=P,a=b,o=function(){function t(e){var i=this;this.subscribedChannels={},this.options=e,this.listeners={},this.eventFormatter=new n.EventFormatter(e.namespace),this.websocketInstance=new a.LarasocketWebsocket(e,function(c){return i.route(c)},function(){return i.reconnect()})}return t.prototype.disconnect=function(){this.websocketInstance.close()},t.prototype.reconnect=function(){for(var e=0,i=Object.values(this.subscribedChannels);e<i.length;e++){var c=i[e];this.subscribe(c)}},t.prototype.subscribe=function(e){var i=this;this.authenticate(e).then(function(c){i.subscribedChannels[e.name]=e;var u=i.getSocketMessage(r.OutgoingMessageType.SUBSCRIBE);u.payload=c,u.channel=e,i.send(u)})},t.prototype.unsubscribe=function(e){delete this.subscribedChannels[e.name];var i=this.getSocketMessage(r.OutgoingMessageType.UNSUBSCRIBE);i.channel=e,this.send(i)},t.prototype.on=function(e,i){var c=this.eventFormatter.format(e);this.listeners[c]=i},t.prototype.removeListener=function(e){var i=this.eventFormatter.format(e);delete this.listeners[i]},t.prototype.getSocketMessage=function(e){return new r.OutgoingMessage(this.options.token,e)},t.prototype.send=function(e){this.websocketInstance.send(e)},t.prototype.socketId=function(){return this.websocketInstance.connectionId},t.prototype.route=function(e){if(e.event){var i=this.eventFormatter.format(e.event);if(this.listeners[i])try{var c=e.payload;typeof c=="string"&&(c=JSON.parse(c)),this.listeners[i](c)}catch{throw new Error("Failed to parse incoming message")}}},t.prototype.authenticate=function(e){return e instanceof s.LarasocketPresenceChannel||e instanceof s.LarasocketPrivateChannel?this.websocketInstance.getAuthNetworkPromise(e):Promise.resolve()},t}();return l.LarasocketManager=o,l}var I;function R(){return I||(I=1,function(s){var n=f&&f.__createBinding||(Object.create?function(a,o,t,e){e===void 0&&(e=t),Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[t]}})}:function(a,o,t,e){e===void 0&&(e=t),a[e]=o[t]}),r=f&&f.__exportStar||function(a,o){for(var t in a)t!=="default"&&!o.hasOwnProperty(t)&&n(o,a,t)};Object.defineProperty(s,"__esModule",{value:!0}),r(g,s),r(X(),s)}(w)),w}var j;function B(){if(j)return p;j=1;var s=f&&f.__extends||function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var u in c)c.hasOwnProperty(u)&&(i[u]=c[u])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(p,"__esModule",{value:!0}),p.LarasocketChannel=void 0;var n=y,r=R(),a=function(o){s(t,o);function t(e,i,c){var u=o.call(this)||this;return u.events={},u.eventFormatter=new r.EventFormatter(c.namespace),u.name=i,u.socket=e,u.options=c,u.subscribe(),u}return t.prototype.subscribe=function(){this.socket.subscribe(this)},t.prototype.unsubscribe=function(){this.unbind(),this.socket.unsubscribe(this)},t.prototype.listen=function(e,i){return this.on(e,i),this},t.prototype.stopListening=function(e){var i=this.eventFormatter.format(e);return this.socket.removeListener(i),delete this.events[i],this},t.prototype.on=function(e,i){this.socket.on(e,i),this.bind(e,i)},t.prototype.bind=function(e,i){this.events[e]=this.events[e]||[],this.events[e].push(i)},t.prototype.unbind=function(){var e=this;Object.keys(this.events).forEach(function(i){e.socket.removeListener(i),delete e.events[i]})},t}(n.Channel);return p.LarasocketChannel=a,p}var v={},S;function U(){if(S)return v;S=1;var s=f&&f.__extends||function(){var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,c){i.__proto__=c}||function(i,c){for(var u in c)c.hasOwnProperty(u)&&(i[u]=c[u])},o(t,e)};return function(t,e){o(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}();Object.defineProperty(v,"__esModule",{value:!0}),v.LarasocketPrivateChannel=void 0;var n=B(),r=P,a=function(o){s(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.whisper=function(e,i){var c=this.socket.getSocketMessage(r.OutgoingMessageType.WHISPER);return c.channel=this,c.event="client-"+e,c.payload=i,this.socket.send(c),this},t}(n.LarasocketChannel);return v.LarasocketPrivateChannel=a,v}var _={},x;function Q(){if(x)return _;x=1;var s=f&&f.__extends||function(){var a=function(o,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var c in i)i.hasOwnProperty(c)&&(e[c]=i[c])},a(o,t)};return function(o,t){a(o,t);function e(){this.constructor=o}o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}}();Object.defineProperty(_,"__esModule",{value:!0}),_.LarasocketPresenceChannel=void 0;var n=U(),r=function(a){s(o,a);function o(){return a!==null&&a.apply(this,arguments)||this}return o.prototype.here=function(t){return this.on(".presence:subscribed",t),this},o.prototype.joining=function(t){return this.on(".presence:joining",t),this},o.prototype.leaving=function(t){return this.on(".presence:leaving",t),this},o}(n.LarasocketPrivateChannel);return _.LarasocketPresenceChannel=r,_}var E;function F(){return E||(E=1,function(s){var n=f&&f.__createBinding||(Object.create?function(a,o,t,e){e===void 0&&(e=t),Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[t]}})}:function(a,o,t,e){e===void 0&&(e=t),a[e]=o[t]}),r=f&&f.__exportStar||function(a,o){for(var t in a)t!=="default"&&!o.hasOwnProperty(t)&&n(o,a,t)};Object.defineProperty(s,"__esModule",{value:!0}),r(y,s),r(B(),s),r(U(),s),r(Q(),s)}(O)),O}var Y=f&&f.__extends||function(){var s=function(n,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var t in o)o.hasOwnProperty(t)&&(a[t]=o[t])},s(n,r)};return function(n,r){s(n,r);function a(){this.constructor=n}n.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}();Object.defineProperty(k,"__esModule",{value:!0});k.LarasocketConnector=void 0;var C=F(),Z=d,ee=R(),te=function(s){Y(n,s);function n(){var r=s!==null&&s.apply(this,arguments)||this;return r.channels={},r}return n.prototype.connect=function(){this.websocket=new ee.LarasocketManager(this.options)},n.prototype.listen=function(r,a,o){return this.channel(r).listen(a,o)},n.prototype.channel=function(r){return this.channels[r]||(this.channels[r]=new C.LarasocketChannel(this.websocket,r,this.options)),this.channels[r]},n.prototype.privateChannel=function(r){return this.channels["private-"+r]||(this.channels["private-"+r]=new C.LarasocketPrivateChannel(this.websocket,"private-"+r,this.options)),this.channels["private-"+r]},n.prototype.presenceChannel=function(r){return this.channels["presence-"+r]||(this.channels["presence-"+r]=new C.LarasocketPresenceChannel(this.websocket,"presence-"+r,this.options)),this.channels["presence-"+r]},n.prototype.leave=function(r){var a=this,o=[r,"private-"+r,"presence-"+r];o.forEach(function(t){a.leaveChannel(t)})},n.prototype.leaveChannel=function(r){this.channels[r]&&(this.channels[r].unsubscribe(),delete this.channels[r])},n.prototype.socketId=function(){return this.websocket.socketId()},n.prototype.disconnect=function(){this.websocket.disconnect()},n}(Z.Connector);k.LarasocketConnector=te;(function(s){var n=f&&f.__createBinding||(Object.create?function(a,o,t,e){e===void 0&&(e=t),Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[t]}})}:function(a,o,t,e){e===void 0&&(e=t),a[e]=o[t]}),r=f&&f.__exportStar||function(a,o){for(var t in a)t!=="default"&&!o.hasOwnProperty(t)&&n(o,a,t)};Object.defineProperty(s,"__esModule",{value:!0}),r(d,s),r(k,s)})(N);Object.defineProperty(T,"__esModule",{value:!0});var ne=N,oe=T.default=ne.LarasocketConnector;window.Echo=new W({broadcaster:oe,token:"3324|07Jc0XGeN5nGyItGvbPG7gYVTc30wUWlUVgy41JV"});
